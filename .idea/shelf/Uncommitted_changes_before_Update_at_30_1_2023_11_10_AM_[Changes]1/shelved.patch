Index: app/src/main/java/com/example/gas4u/OrderDetailsAdminActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.gas4u;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.graphics.ColorSpace;\r\nimport android.location.Address;\r\nimport android.location.Geocoder;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.text.format.DateFormat;\r\nimport android.view.View;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class OrderDetailsAdminActivity extends AppCompatActivity {\r\n\r\n    // view of ui\r\n    private ImageButton backBtn, editBtn, mapBtn;\r\n    private TextView orderIdTv, dateTv, orderStatusTv, emailTv, phoneTv,totalItemsTv, amountTv, addressTv;\r\n    private RecyclerView itemsRv;\r\n\r\n    String orderId, orderBy;\r\n    // open in map the destination\r\n    String sourceLatitude,sourceLongitude, destinationLatitude, destinationLongitude;\r\n\r\n    private FirebaseAuth firebaseAuth;\r\n    private ArrayList<ModelOrderedItem> orderedItemArrayList;\r\n    private AdapterOrderedItem adapterOrderedItem;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_order_details_admin);\r\n\r\n        // initialize view of ui\r\n        backBtn = findViewById(R.id.backBtn);\r\n        editBtn = findViewById(R.id.editBtn);\r\n        mapBtn = findViewById(R.id.mapBtn);\r\n        orderIdTv = findViewById(R.id.orderIdTv);\r\n        dateTv = findViewById(R.id.dateTv);\r\n        orderStatusTv = findViewById(R.id.orderStatusTv);\r\n        emailTv = findViewById(R.id.emailTv);\r\n        phoneTv = findViewById(R.id.phoneTv);\r\n        totalItemsTv = findViewById(R.id.totalItemsTv);\r\n        amountTv = findViewById(R.id.amountTv);\r\n        addressTv = findViewById(R.id.addressTv);\r\n        itemsRv = findViewById(R.id.itemsRv);\r\n\r\n        // from intent get data\r\n        orderId = getIntent().getStringExtra(\"orderId\");\r\n        orderBy = getIntent().getStringExtra(\"orderBy\");\r\n\r\n        firebaseAuth = FirebaseAuth.getInstance();\r\n        loadMyInfo();\r\n        loadBuyerInfo();\r\n        loadOrderDetails();\r\n        loadOrderedItems();\r\n\r\n        backBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // back\r\n                onBackPressed();\r\n            }\r\n        });\r\n\r\n        mapBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                openMap();\r\n            }\r\n        });\r\n        editBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                //edit order status\r\n                editOrderStatusDialog();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void editOrderStatusDialog() {\r\n        //options to display in dialog\r\n        final String[] options = {\"In Progress\", \"Completed\", \"Cancelled\"};\r\n\r\n        //dialog\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n        builder.setTitle(\"Edit Order Status\")\r\n                .setItems(options, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        // handle the click of item\r\n                        String selectedOption = options[which];\r\n                        editOrderStatus(selectedOption);\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void editOrderStatus(String selectedOption) {\r\n\r\n        //setting data to place in firebase db\r\n        HashMap<String, Object> hashMap = new HashMap<>();\r\n        hashMap.put(\"OrderStatus\", \"\" + selectedOption);\r\n\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(\"Users\");\r\n        ref.child(firebaseAuth.getUid()).child(\"Orders\").child(orderId)\r\n                .updateChildren(hashMap)\r\n                .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                    @Override\r\n                    public void onSuccess(Void unused) {\r\n\r\n                        //status is update\r\n                        Toast.makeText(OrderDetailsAdminActivity.this, \"Order is now \" + selectedOption, Toast.LENGTH_SHORT).show();\r\n\r\n                    }\r\n                })\r\n                .addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n\r\n                        //status fail to update, display reason\r\n                        Toast.makeText(OrderDetailsAdminActivity.this, \"\" + e.getMessage(), Toast.LENGTH_SHORT).show();\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void openMap() {\r\n        //saddr is source address\r\n        //daddr is the destination address\r\n        String address = \"https://maps.google.com/maps?saddr=\" + sourceLatitude + \",\" + sourceLongitude + \"&daddr=\" + destinationLatitude + \",\" + destinationLongitude;\r\n        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(address));\r\n        startActivity(intent);\r\n    }\r\n\r\n    private void loadMyInfo() {\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(\"Users\");\r\n        ref.child(firebaseAuth.getUid())\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        sourceLatitude = \"\"+snapshot.child(\"latitude\").getValue();\r\n                        sourceLongitude = \"\"+snapshot.child(\"longitude\").getValue();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void loadBuyerInfo() {\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(\"Users\");\r\n        ref.child(orderBy)\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        //get info of buyer\r\n                        destinationLatitude = \"\"+snapshot.child(\"latitude\").getValue();\r\n                        destinationLongitude = \"\"+snapshot.child(\"longitude\").getValue();\r\n                        String email = \"\"+snapshot.child(\"email\").getValue();\r\n                        String phone = \"\"+snapshot.child(\"phone\").getValue();\r\n\r\n                        // set buyer info\r\n                        emailTv.setText(email);\r\n                        phoneTv.setText(phone);\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void loadOrderDetails(){\r\n        // based on order id, load the the details of order\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(\"Users\");\r\n        ref.child(firebaseAuth.getUid()).child(\"Orders\").child(orderId)\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        // get info of the order\r\n                        String orderBy = \"\"+ snapshot.child(\"orderBy\").getValue();\r\n                        String orderCost = \"\"+ snapshot.child(\"orderCost\").getValue();\r\n                        String orderId = \"\"+ snapshot.child(\"orderId\").getValue();\r\n                        String orderStatus = \"\"+ snapshot.child(\"orderStatus\").getValue();\r\n                        String orderTime = \"\"+ snapshot.child(\"orderTime\").getValue();\r\n                        String orderTo = \"\"+ snapshot.child(\"orderTo\").getValue();\r\n                        String latitude = \"\"+ snapshot.child(\"latitude\").getValue();\r\n                        String longitude = \"\"+ snapshot.child(\"longitude\").getValue();\r\n\r\n                        //converting timestamp\r\n                        Calendar calendar = Calendar.getInstance();\r\n                        calendar.setTimeInMillis(Long.parseLong(orderTime));\r\n                        String dateFormated = DateFormat.format(\"dd/MM/yyyy\", calendar).toString();\r\n\r\n                        //status of order\r\n                        if (orderStatus.equals(\"In Progress\")){\r\n                            orderStatusTv.setTextColor(getResources().getColor(R.color.colorPrimary));\r\n                        }\r\n                        else if(orderStatus.equals(\"Completed\")){\r\n                            orderStatusTv.setTextColor(getResources().getColor(R.color.colorGreen));\r\n                        }\r\n                        else if(orderStatus.equals(\"Cancelled\")){\r\n                            orderStatusTv.setTextColor(getResources().getColor(R.color.colorRed));\r\n                        }\r\n\r\n                        //data setting\r\n                        orderIdTv.setText(orderId);\r\n                        orderStatusTv.setText(orderStatus);\r\n                        amountTv.setText(\"RM\"+ orderCost);\r\n                        dateTv.setText(dateFormated);\r\n\r\n                        findAddress(latitude, longitude); // to find the address for delivery\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void findAddress(String latitude, String longitude) {\r\n        double la = Double.parseDouble(latitude);\r\n        double lo = Double.parseDouble(longitude);\r\n\r\n        Geocoder geocoder;\r\n        List<Address> addresses;\r\n        geocoder = new Geocoder(this, Locale.getDefault());\r\n\r\n        try{\r\n            addresses = geocoder.getFromLocation(la, lo, 1);\r\n\r\n            //the complete address\r\n            String address = addresses.get(0).getAddressLine(0);\r\n            addressTv.setText(address);\r\n        }\r\n        catch (Exception e){\r\n            Toast.makeText(this, \"\"+e.getMessage(), Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void loadOrderedItems(){\r\n        // loading the products/items of the order\r\n\r\n        //initialize list\r\n        orderedItemArrayList = new ArrayList<>();\r\n\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(\"Users\");\r\n        ref.child(firebaseAuth.getUid()).child(\"Orders\").child(orderId).child(\"Items\")\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        orderedItemArrayList.clear(); // clear the list before data is added\r\n\r\n                        for(DataSnapshot ds: snapshot.getChildren()){\r\n                            ModelOrderedItem modelOrderedItem = ds.getValue(ModelOrderedItem.class);\r\n                            //adding to list\r\n                            orderedItemArrayList.add(modelOrderedItem);\r\n                        }\r\n                        //setting adapter\r\n                        adapterOrderedItem = new AdapterOrderedItem(OrderDetailsAdminActivity.this, orderedItemArrayList);\r\n                        //setting adapter to recyclerView\r\n                        itemsRv.setAdapter(adapterOrderedItem);\r\n\r\n                        //setting total number od products in the order\r\n                        totalItemsTv.setText(\"\"+snapshot.getChildren());\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/gas4u/OrderDetailsAdminActivity.java b/app/src/main/java/com/example/gas4u/OrderDetailsAdminActivity.java
--- a/app/src/main/java/com/example/gas4u/OrderDetailsAdminActivity.java	
+++ b/app/src/main/java/com/example/gas4u/OrderDetailsAdminActivity.java	
@@ -21,11 +21,15 @@
 import com.google.android.gms.tasks.OnFailureListener;
 import com.google.android.gms.tasks.OnSuccessListener;
 import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.auth.FirebaseUser;
 import com.google.firebase.database.DataSnapshot;
 import com.google.firebase.database.DatabaseError;
 import com.google.firebase.database.DatabaseReference;
 import com.google.firebase.database.FirebaseDatabase;
 import com.google.firebase.database.ValueEventListener;
+import com.google.firebase.firestore.DocumentReference;
+import com.google.firebase.firestore.DocumentSnapshot;
+import com.google.firebase.firestore.FirebaseFirestore;
 
 import java.util.ArrayList;
 import java.util.Calendar;
@@ -44,7 +48,9 @@
     // open in map the destination
     String sourceLatitude,sourceLongitude, destinationLatitude, destinationLongitude;
 
-    private FirebaseAuth firebaseAuth;
+    //authentication
+    FirebaseAuth fa = FirebaseAuth.getInstance();
+    FirebaseFirestore db = FirebaseFirestore.getInstance();
     private ArrayList<ModelOrderedItem> orderedItemArrayList;
     private AdapterOrderedItem adapterOrderedItem;
     @Override
@@ -197,14 +203,15 @@
 
     private void loadOrderDetails(){
         // based on order id, load the the details of order
-        DatabaseReference ref = FirebaseDatabase.getInstance().getReference("Users");
-        ref.child(firebaseAuth.getUid()).child("Orders").child(orderId)
-                .addValueEventListener(new ValueEventListener() {
+        FirebaseUser user = fa.getCurrentUser();
+        DocumentReference docRef = db.collection("Customers").document(user.getUid());
+        docRef.get()
+                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {
                     @Override
                     public void onDataChange(@NonNull DataSnapshot snapshot) {
                         // get info of the order
-                        String orderBy = ""+ snapshot.child("orderBy").getValue();
-                        String orderCost = ""+ snapshot.child("orderCost").getValue();
+                        String orderBy = ""+ snapshot.child("Receiver Name").getValue();
+                        String orderCost = ""+ snapshot.child("Total Price").getValue();
                         String orderId = ""+ snapshot.child("orderId").getValue();
                         String orderStatus = ""+ snapshot.child("orderStatus").getValue();
                         String orderTime = ""+ snapshot.child("orderTime").getValue();
Index: app/src/main/res/layout/activity_order_details_admin.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    tools:context=\".d2\">\r\n    \r\n    <!--Toolbar-->\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"@drawable/shape_rect03\"\r\n        android:padding=\"10dp\">\r\n        \r\n        <ImageButton\r\n            android:id=\"@+id/backBtn\"\r\n            android:layout_width=\"30dp\"\r\n            android:layout_height=\"30dp\"\r\n            android:background=\"@null\"\r\n            android:src=\"@drawable/ic_white_back\"/>\r\n\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:text=\"Order Details\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"20sp\"\r\n            android:textStyle=\"bold\"/>\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/editBtn\"\r\n            android:layout_width=\"30dp\"\r\n            android:layout_height=\"30dp\"\r\n            android:background=\"@null\"\r\n            android:layout_alignParentEnd=\"true\"\r\n            android:src=\"@drawable/ic_white_edit\"/>\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/mapBtn\"\r\n            android:layout_width=\"30dp\"\r\n            android:layout_height=\"30dp\"\r\n            android:background=\"@null\"\r\n            android:layout_toStartOf=\"@id/editBtn\"\r\n            android:src=\"@drawable/ic_white_map\"/>\r\n    </RelativeLayout>\r\n\r\n    <!--Info of Order-->\r\n    <androidx.cardview.widget.CardView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        app:cardElevation=\"3dp\"\r\n        app:contentPadding=\"5dp\">\r\n\r\n        <TableLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <TableRow>\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"5dp\"\r\n                    android:text=\"OrderID\"\r\n                    android:textColor=\"@color/textColor\"\r\n                    android:textStyle=\"bold\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/orderIdTv\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:text=\"121212121212\"\r\n                    android:textColor=\"@color/textColor\"/>\r\n\r\n            </TableRow>\r\n\r\n            <TableRow>\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"5dp\"\r\n                    android:text=\"Date\"\r\n                    android:textColor=\"@color/textColor\"\r\n                    android:textStyle=\"bold\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/dateTv\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:text=\"dd/MM/yyyy\"\r\n                    android:textColor=\"@color/textColor\"/>\r\n\r\n            </TableRow>\r\n\r\n            <TableRow>\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"5dp\"\r\n                    android:text=\"Order Status\"\r\n                    android:textColor=\"@color/textColor\"\r\n                    android:textStyle=\"bold\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/orderStatusTv\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:text=\"In Progress\"\r\n                    android:textColor=\"@color/colorPrimary\"/>\r\n\r\n            </TableRow>\r\n\r\n            <TableRow>\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"5dp\"\r\n                    android:text=\"Buyer Email\"\r\n                    android:textColor=\"@color/textColor\"\r\n                    android:textStyle=\"bold\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/emailTv\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:text=\"Email\"\r\n                    android:textColor=\"@color/textColor\"/>\r\n\r\n            </TableRow>\r\n\r\n            <TableRow>\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"5dp\"\r\n                    android:text=\"Buyer Phone\"\r\n                    android:textColor=\"@color/textColor\"\r\n                    android:textStyle=\"bold\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/phoneTv\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:text=\"+032546980\"\r\n                    android:autoLink=\"all\"\r\n                    android:textColor=\"@color/textColor\"/>\r\n\r\n            </TableRow>\r\n\r\n            <TableRow>\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"5dp\"\r\n                    android:text=\"Items\"\r\n                    android:textColor=\"@color/textColor\"\r\n                    android:textStyle=\"bold\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/totalItemsTv\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:text=\"12\"\r\n                    android:textColor=\"@color/textColor\"/>\r\n\r\n            </TableRow>\r\n\r\n            <TableRow>\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"5dp\"\r\n                    android:text=\"Amount\"\r\n                    android:textColor=\"@color/textColor\"\r\n                    android:textStyle=\"bold\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/amountTv\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:text=\"RM12\"\r\n                    android:textColor=\"@color/textColor\"/>\r\n\r\n            </TableRow>\r\n\r\n            <TableRow>\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_marginEnd=\"5dp\"\r\n                    android:text=\"Delivery Address\"\r\n                    android:textColor=\"@color/textColor\"\r\n                    android:textStyle=\"bold\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/addressTv\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_weight=\"1\"\r\n                    android:text=\"Customer Address \"\r\n                    android:textColor=\"@color/textColor\"/>\r\n\r\n            </TableRow>\r\n\r\n        </TableLayout>\r\n\r\n    </androidx.cardview.widget.CardView>\r\n\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"@color/colorPrimary\"\r\n        android:text=\"Ordered Items\"\r\n        android:textAlignment=\"center\"\r\n        android:textColor=\"@color/white\"\r\n        android:textStyle=\"bold\"\r\n        android:padding=\"5dp\"/>\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/itemsRv\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\"\r\n        tools:listitem=\"@layout/row_ordereditem\"/>\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_order_details_admin.xml b/app/src/main/res/layout/activity_order_details_admin.xml
--- a/app/src/main/res/layout/activity_order_details_admin.xml	
+++ b/app/src/main/res/layout/activity_order_details_admin.xml	
@@ -5,7 +5,7 @@
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="vertical"
-    tools:context=".d2">
+    tools:context=".OrderDetailsAdminActivity">
     
     <!--Toolbar-->
     <RelativeLayout
@@ -75,8 +75,8 @@
                     android:layout_height="wrap_content"
                     android:layout_marginTop="5dp"
                     android:layout_weight="1"
-                    android:text="121212121212"
-                    android:textColor="@color/textColor"/>
+                    android:text="10987"
+                    android:textColor="@color/textColor" />
 
             </TableRow>
 
@@ -97,8 +97,8 @@
                     android:layout_height="wrap_content"
                     android:layout_marginTop="5dp"
                     android:layout_weight="1"
-                    android:text="dd/MM/yyyy"
-                    android:textColor="@color/textColor"/>
+                    android:text="31/01/2023"
+                    android:textColor="@color/textColor" />
 
             </TableRow>
 
@@ -141,8 +141,8 @@
                     android:layout_height="wrap_content"
                     android:layout_marginTop="5dp"
                     android:layout_weight="1"
-                    android:text="Email"
-                    android:textColor="@color/textColor"/>
+                    android:text="ainasakinah@gmail.com"
+                    android:textColor="@color/textColor" />
 
             </TableRow>
 
@@ -163,9 +163,9 @@
                     android:layout_height="wrap_content"
                     android:layout_marginTop="5dp"
                     android:layout_weight="1"
-                    android:text="+032546980"
                     android:autoLink="all"
-                    android:textColor="@color/textColor"/>
+                    android:text="+6013-765345"
+                    android:textColor="@color/textColor" />
 
             </TableRow>
 
@@ -186,8 +186,8 @@
                     android:layout_height="wrap_content"
                     android:layout_marginTop="5dp"
                     android:layout_weight="1"
-                    android:text="12"
-                    android:textColor="@color/textColor"/>
+                    android:text="2"
+                    android:textColor="@color/textColor" />
 
             </TableRow>
 
@@ -208,8 +208,8 @@
                     android:layout_height="wrap_content"
                     android:layout_marginTop="5dp"
                     android:layout_weight="1"
-                    android:text="RM12"
-                    android:textColor="@color/textColor"/>
+                    android:text="RM50"
+                    android:textColor="@color/textColor" />
 
             </TableRow>
 
Index: app/src/main/java/com/example/gas4u/d2.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.gas4u;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.gas4u.databinding.ActivityD2Binding;\r\nimport com.example.gas4u.viewmodel.ModelOrderShop;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.firestore.DocumentChange;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\n\r\npublic class d2 extends DrawerAdminActivity{\r\n\r\n    ActivityD2Binding activityD2Binding;\r\n    TextView nameTv,emailTv,phoneTv, tabProductsTv, tabOrdersTv, filterProductsTv, filteredOrdersTv;\r\n    EditText searchProductEt;\r\n    ImageButton logoutBtn,addToCart,filterProductBtn, filterOrderBtn;\r\n    ImageView profileIv;\r\n    RelativeLayout productsRl, ordersRL;\r\n    RecyclerView productsRv, ordersRv;\r\n\r\n    FirebaseFirestore db;\r\n    FirebaseAuth firebaseAuth;\r\n    ProgressDialog progressDialog;\r\n    ArrayList<ModelProduct> productList;\r\n    AdapterProductSeller adapterProductSeller;\r\n    ArrayList<ModelOrderShop> orderShopArrayList;\r\n    AdapterOrderShop adapterOrderShop;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        activityD2Binding = ActivityD2Binding.inflate(getLayoutInflater());\r\n        setContentView(activityD2Binding.getRoot());\r\n        allocateActivityTitle(\"Orders\");\r\n\r\n        nameTv = findViewById(R.id.nameTv);\r\n        emailTv = findViewById(R.id.emailTv);\r\n        phoneTv = findViewById(R.id.phoneTv);\r\n        tabProductsTv = findViewById(R.id.tabProductsTv);\r\n        tabOrdersTv = findViewById(R.id.tabOrdersTv);\r\n        filterProductsTv = findViewById(R.id.filterProductsTv);\r\n        searchProductEt = findViewById(R.id.searchProductEt);\r\n        logoutBtn = findViewById(R.id.logoutBtn);\r\n        addToCart = findViewById(R.id.addToCart);\r\n        filterProductBtn = findViewById(R.id.filterProductBtn);\r\n        profileIv = findViewById(R.id.profileIv);\r\n        productsRl = findViewById(R.id.productsRl);\r\n        productsRv = findViewById(R.id.productsRv);\r\n        ordersRL = findViewById(R.id.ordersRl);\r\n        filteredOrdersTv = findViewById(R.id.filteredOrdersTv);\r\n        filterOrderBtn = findViewById(R.id.filterOrderBtn);\r\n        ordersRv = findViewById(R.id.ordersRv); // creates the layout for recyclerview\r\n\r\n\r\n        progressDialog = new ProgressDialog(this);\r\n        progressDialog.setTitle(\"Please wait\");\r\n        progressDialog.setCanceledOnTouchOutside(false);\r\n        firebaseAuth = FirebaseAuth.getInstance();\r\n        db = FirebaseFirestore.getInstance();\r\n        checkUser();\r\n        loadAllProducts();\r\n        loadAllOrders();\r\n\r\n        showProductsUI();\r\n\r\n        //search\r\n        searchProductEt.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n\r\n            }\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                try{\r\n                    adapterProductSeller.getFilter().filter(s);\r\n                }catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n        logoutBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                makeMeOffline();\r\n            }\r\n        });\r\n\r\n        addToCart.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(d2.this, AdapterProductSeller.class));\r\n            }\r\n        });\r\n\r\n        tabProductsTv.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                showProductsUI();\r\n            }\r\n\r\n        });\r\n\r\n        tabOrdersTv.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        filterProductBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(d2.this);\r\n                builder.setTitle(\"Choose Category:\").setItems(Constants.productCategories1, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        //get selected item\r\n                        String selected = Constants.productCategories1[which];\r\n                        filterProductsTv.setText(selected);\r\n                        if(selected.equals(\"All\")){\r\n                            //load all\r\n                            loadAllProducts();\r\n                        }\r\n                        else{\r\n                            //load filter\r\n                            loadFilteredProducts(selected);\r\n                        }\r\n                    }\r\n                }).show();\r\n            }\r\n        });\r\n        filterOrderBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // options of dialog that will be displayed\r\n                String[] options = {\"All\", \"In Progress\", \"Completed\", \"Cancelled\"};\r\n                // dialog\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(d2.this);\r\n                builder.setTitle(\"Filter Orders:\")\r\n                        .setItems(options, new DialogInterface.OnClickListener(){\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which){\r\n\r\n                                //handle clicking of item\r\n                                if(which==0){\r\n                                    // All is clicked\r\n                                    filteredOrdersTv.setText(\"Showing All Orders\");\r\n                                    adapterOrderShop.getFilter().filter(\"\"); //all orders are shown\r\n                                }\r\n                                else {\r\n                                    String optionClicked = options[which];\r\n                                    filteredOrdersTv.setText(\"Showing \" + optionClicked + \" Orders\"); // like Showing The Completed Orders\r\n                                    adapterOrderShop.getFilter().filter(optionClicked);\r\n\r\n                                }\r\n\r\n                            }\r\n                        })\r\n                        .show();\r\n            }\r\n        });\r\n    /*\r\n        reviewsBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // open the same reviews activity as user\r\n                Intent intent = new Intent(MainAdminActivity.this, ShopRe)\r\n            }\r\n        });*/\r\n    }\r\n\r\n    private void loadAllOrders() {\r\n        // initializa array list\r\n        orderShopArrayList = new ArrayList<>();\r\n\r\n        // loading orders\r\n        DatabaseReference ref = FirebaseDatabase.getInstance().getReference(\"Users\");\r\n        ref.child(firebaseAuth.getUid()).child(\"Orders\")\r\n                .addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                        //list is cleared before new data is added\r\n                        orderShopArrayList.clear();\r\n                        for (DataSnapshot ds: dataSnapshot.getChildren()){\r\n                            ModelOrderShop modelOrderShop = ds.getValue(ModelOrderShop.class);\r\n\r\n                            // adding to list\r\n                            orderShopArrayList.add(modelOrderShop);\r\n                        }\r\n\r\n                        //setting the adapter\r\n                        adapterOrderShop = new AdapterOrderShop(d2.this, orderShopArrayList);\r\n                        //setting the adapter to recyclerview\r\n                        ordersRv.setAdapter(adapterOrderShop);\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void loadFilteredProducts(String selected) {\r\n//        productList = new ArrayList<>();\r\n//        //get all products\r\n//        DatabaseReference reference = FirebaseDatabase.getInstance().getReference(\"Users\");\r\n//        reference.child(firebaseAuth.getUid()).child(\"Products\").addValueEventListener(new ValueEventListener() {\r\n//            @Override\r\n//            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n//                //before getting reset list\r\n//                productList.clear();\r\n//                for (DataSnapshot ds: snapshot.getChildren()){\r\n//                    String productCategory =\"\"+ds.child(\"productCategory\").getValue();\r\n//\r\n//                    //if selected category matches product category then add in list\r\n//                    if(selected.equals(productCategory)){\r\n//                        ModelProduct modelProduct = ds.getValue(ModelProduct.class);\r\n//                        productList.add(modelProduct);\r\n//                    }\r\n//                    ModelProduct modelProduct = ds.getValue(ModelProduct.class);\r\n//                    productList.add(modelProduct);\r\n//                }\r\n//                //setup adapter\r\n//                adapterProductSeller = new AdapterProductSeller(BrandActivity.this, productList);\r\n//                //set adapter\r\n//                productsRv.setAdapter(adapterProductSeller);\r\n//            }\r\n//            @Override\r\n//            public void onCancelled(@NonNull DatabaseError error) {\r\n//\r\n//            }\r\n//        });\r\n    }\r\n    private void loadAllProducts() {\r\n        productList = new ArrayList<>();\r\n        //setup adapter\r\n        adapterProductSeller = new AdapterProductSeller(d2.this, productList);\r\n        //set adapter\r\n        productsRv.setAdapter(adapterProductSeller);\r\n        db.collection(\"Product\").orderBy(\"productTitle\", Query.Direction.ASCENDING)\r\n                .addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n\r\n                    @Override\r\n                    public void onEvent(@Nullable QuerySnapshot value, @Nullable FirebaseFirestoreException error) {\r\n\r\n                        productList.clear();\r\n                        if (error != null) {\r\n\r\n                            Log.e(\"Firestore error\", error.getMessage());\r\n                            return;\r\n                        }\r\n                        for (DocumentChange dc : value.getDocumentChanges()) {\r\n\r\n                            if (dc.getType() == DocumentChange.Type.ADDED) {\r\n                                productList.add(dc.getDocument().toObject(ModelProduct.class));\r\n                            }\r\n                            adapterProductSeller.notifyDataSetChanged();\r\n                        }\r\n\r\n                    }\r\n                });\r\n    }\r\n    private void showProductsUI() {\r\n        productsRl.setVisibility(View.VISIBLE);\r\n\r\n        tabProductsTv.setTextColor(getResources().getColor(R.color.colorPrimary));\r\n        tabProductsTv.setBackgroundResource((R.drawable.shape_rect01));\r\n    }\r\n    private void checkUser() {\r\n        FirebaseUser user = firebaseAuth.getCurrentUser();\r\n        if(user==null){\r\n            startActivity(new Intent(d2.this,SignInActivity.class));\r\n            finish();\r\n        }\r\n        else{\r\n            //loadMyInfo();\r\n        }\r\n    }\r\n    /*   private void loadMyInfo() {\r\n\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        DocumentReference reference;\r\n        FirebaseFirestore firestore = FirebaseFirestore.getInstance();\r\n        reference = firestore.collection(\"Customers\").document(user.getUid());\r\n        reference.get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                if (task.getResult().exists()) {\r\n\r\n                    String nameResult = task.getResult().getString(\"userName\");\r\n                    String url = task.getResult().getString(\"profilePhoto\");\r\n                    String emailResult = task.getResult().getString(\"userEmail\");\r\n                    String phoneResult = task.getResult().getString(\"userPhone\");\r\n\r\n//                    Picasso.get().load(url).into(profileIv);\r\n                    nameTv.setText(nameResult);\r\n                    emailTv.setText(emailResult);\r\n                    phoneTv.setText(phoneResult);\r\n                    try{\r\n                        Picasso.get().load(url).placeholder(R.drawable.ic_baseline_person_24).into(profileIv);\r\n                    }\r\n                    catch(Exception e){\r\n                        profileIv.setImageResource(R.drawable.ic_baseline_person_24);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }*/\r\n\r\n    private void makeMeOffline() {\r\n        progressDialog.setMessage(\"Logging Out...\");\r\n        HashMap<String, Object> hashMap = new HashMap<>();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/gas4u/d2.java b/app/src/main/java/com/example/gas4u/d2.java
--- a/app/src/main/java/com/example/gas4u/d2.java	
+++ b/app/src/main/java/com/example/gas4u/d2.java	
@@ -168,7 +168,7 @@
             @Override
             public void onClick(View v) {
                 // options of dialog that will be displayed
-                String[] options = {"All", "In Progress", "Completed", "Cancelled"};
+                String[] options = {"All", "Confirmed", "Out for Delivery"};
                 // dialog
                 AlertDialog.Builder builder = new AlertDialog.Builder(d2.this);
                 builder.setTitle("Filter Orders:")
@@ -310,39 +310,10 @@
             finish();
         }
         else{
-            //loadMyInfo();
+           // loadMyInfo();
         }
     }
-    /*   private void loadMyInfo() {
-
-        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();
-        DocumentReference reference;
-        FirebaseFirestore firestore = FirebaseFirestore.getInstance();
-        reference = firestore.collection("Customers").document(user.getUid());
-        reference.get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {
-            @Override
-            public void onComplete(@NonNull Task<DocumentSnapshot> task) {
-                if (task.getResult().exists()) {
 
-                    String nameResult = task.getResult().getString("userName");
-                    String url = task.getResult().getString("profilePhoto");
-                    String emailResult = task.getResult().getString("userEmail");
-                    String phoneResult = task.getResult().getString("userPhone");
-
-//                    Picasso.get().load(url).into(profileIv);
-                    nameTv.setText(nameResult);
-                    emailTv.setText(emailResult);
-                    phoneTv.setText(phoneResult);
-                    try{
-                        Picasso.get().load(url).placeholder(R.drawable.ic_baseline_person_24).into(profileIv);
-                    }
-                    catch(Exception e){
-                        profileIv.setImageResource(R.drawable.ic_baseline_person_24);
-                    }
-                }
-            }
-        });
-    }*/
 
     private void makeMeOffline() {
         progressDialog.setMessage("Logging Out...");
